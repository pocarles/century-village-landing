---
const navLinks = [
  { href: "/#features", label: "Features" },
  { href: "/#how-it-works", label: "How It Works" },
  { href: "/#testimonials", label: "Testimonials" },
  { href: "/#pricing", label: "Pricing" },
  { href: "/changelog", label: "Changelog" },
  { href: "/resources/survival-guide", label: "Resources" },
];
---

<nav id="main-nav" class="fixed top-0 left-0 right-0 z-50 transition-all duration-200 ease-stripe">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16 md:h-20">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2 group">
        <img
          src="/logo.png"
          alt="CenturySync"
          class="h-9 md:h-10 w-auto transition-transform duration-150 ease-stripe group-hover:scale-105"
        />
        <span class="text-xl font-bold tracking-tight">
          <span class="text-primary-600">Century</span><span class="text-gray-800">Sync</span>
        </span>
      </a>

      <!-- Desktop Menu -->
      <div class="hidden lg:flex items-center space-x-1">
        {navLinks.map(link => (
          <a
            href={link.href}
            class="nav-link px-4 py-2 text-sm"
          >
            {link.label}
          </a>
        ))}
      </div>

      <!-- CTA Buttons -->
      <div class="flex items-center space-x-3">
        <!-- Member Sign-in Button -->
        <a
          href="https://centurysync.net"
          target="_blank"
          rel="noopener noreferrer"
          class="hidden sm:inline-flex items-center px-4 py-2.5 bg-white text-primary-600 font-semibold rounded-full border-2 border-primary-600 hover:bg-primary-50 hover:border-primary-700 transition-all duration-150 ease-stripe text-sm shadow-stripe-xs hover:shadow-stripe-sm"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          Member Sign-in
        </a>

        <!-- Request Demo Button -->
        <a
          href="/#demo"
          class="hidden sm:inline-flex items-center px-5 py-2.5 bg-primary-600 text-white font-semibold rounded-full hover:bg-primary-700 transition-all duration-150 ease-stripe btn-shine text-sm shadow-stripe-sm hover:shadow-stripe-md"
        >
          Request Demo
        </a>

        <!-- Mobile menu button -->
        <button
          id="mobile-menu-btn"
          class="lg:hidden p-2.5 rounded-xl hover:bg-gray-100/80 transition-colors duration-150 ease-stripe touch-target"
          aria-label="Toggle menu"
          aria-expanded="false"
        >
          <svg id="menu-icon" class="w-6 h-6 transition-transform duration-200 ease-stripe" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg id="close-icon" class="w-6 h-6 hidden transition-transform duration-200 ease-stripe" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden lg:hidden border-t border-gray-100/50 overflow-hidden">
    <div class="glass px-4 py-4 space-y-1">
      {navLinks.map(link => (
        <a
          href={link.href}
          class="block py-3 px-4 text-gray-600 hover:text-primary-600 hover:bg-primary-50/50 font-medium rounded-xl transition-all duration-150 ease-stripe touch-target"
        >
          {link.label}
        </a>
      ))}
      <div class="pt-4 mt-3 border-t border-gray-200 space-y-3">
        <a
          href="https://centurysync.net"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center justify-center py-3 px-4 text-primary-600 font-semibold rounded-xl bg-primary-50 hover:bg-primary-100 transition-all duration-150 ease-stripe touch-target"
        >
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
          Member Sign-in
        </a>
        <a
          href="/#demo"
          class="flex items-center justify-center py-3 px-4 bg-primary-600 text-white font-semibold rounded-xl hover:bg-primary-700 transition-all duration-150 ease-stripe btn-shine touch-target"
        >
          Request Demo
        </a>
      </div>
    </div>
  </div>
</nav>

<script is:inline>
  // Mobile menu toggle with icon swap
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');
  let isMenuOpen = false;

  if (mobileMenuBtn && mobileMenu && menuIcon && closeIcon) {
    mobileMenuBtn.addEventListener('click', () => {
      isMenuOpen = !isMenuOpen;
      mobileMenu.classList.toggle('hidden');
      menuIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
      mobileMenuBtn.setAttribute('aria-expanded', isMenuOpen);

      // Animate icon
      if (isMenuOpen) {
        closeIcon.style.transform = 'rotate(0deg)';
      } else {
        closeIcon.style.transform = 'rotate(-90deg)';
      }
    });

    // Close mobile menu when clicking a link
    mobileMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        isMenuOpen = false;
        mobileMenu.classList.add('hidden');
        menuIcon.classList.remove('hidden');
        closeIcon.classList.add('hidden');
        mobileMenuBtn.setAttribute('aria-expanded', 'false');
      });
    });
  }

  // Header scroll effect
  const nav = document.getElementById('main-nav');
  let ticking = false;

  function updateHeader() {
    const scrollY = window.scrollY;

    if (scrollY > 20) {
      nav.classList.add('glass', 'shadow-stripe-sm');
      nav.classList.remove('bg-transparent');
    } else {
      nav.classList.remove('glass', 'shadow-stripe-sm');
      nav.classList.add('bg-transparent');
    }

    ticking = false;
  }

  window.addEventListener('scroll', () => {
    if (!ticking) {
      window.requestAnimationFrame(updateHeader);
      ticking = true;
    }
  }, { passive: true });

  // Initial state
  updateHeader();
</script>
